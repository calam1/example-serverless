{
  "apiRequestPostCreateTemplate": {
    "application/json": {
      "operation": "create",
      "tableName": "${tableName}-${stage}",
      "payload": {
        "Item": {
          "content": "$input.json('$')"
        }
      }
    }
  },
  "apiRequestPostReadTemplate": {
    "application/json": {
      "operation": "read",
      "tableName": "${tableName}-${stage}",
      "payload": {
        "Key": {
          "postId": "$input.params('postId')"
        }
      }
    }
  },
  "apiRequestPostUpdateTemplate": {
    "application/json": {
      "operation": "update",
      "tableName": "${tableName}-${stage}",
      "payload": {
        "Key": {
          "postId": "$input.params('postId')"
        },
        "UpdateExpression": "set content = :c",
        "ExpressionAttributeValues": {
          ":c": "$input.json('$')"
        }
      }
    }
  },
  "apiRequestPostDeleteTemplate": {
    "application/json": {
      "operation": "delete",
      "tableName": "${tableName}-${stage}",
      "payload": {
        "Key": {
          "postId": "$input.params('postId')"
        },
        "ConditionExpression": "postId = :p",
        "ExpressionAttributeValues": {
          ":p": "$input.params('postId')"
        }
      }
    }
  },
  "apiRequestPostListTemplate": {
    "application/json": {
      "operation": "list",
      "tableName": "${tableName}-${stage}",
      "payload": {}
    }
  },
  "apiResponsePostReadTemplate": "{\"post\": {\"postId\":\"$input.path('$').Item.postId\", \"content\":{\"user\":\"$input.path('$').Item.content.user\",\"message\":\"$input.path('$').Item.content.message\"}}}",
  "apiResponsePostListTemplate": "{\"posts\" : [#foreach($post in $input.path('$').Items){\"postId\" : \"$post.postId\",\"content\" : { \"user\":\"$post.content.user\",\"message\":\"$post.content.message\" }}#if($foreach.hasNext),#end #end ] }"
}